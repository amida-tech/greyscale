"use strict";angular.module("greyscale.mock",["ngMockE2E"]).run(["$httpBackend","greyscaleUserUoaMock","greyscaleUoaMock","greyscaleUserMock","greyscaleTranslationMock",function(a,b,c,d,e){b(),c(),d(),e(),a.whenGET(/.*/).passThrough(),a.whenPOST(/.*/).passThrough(),a.whenPUT(/.*/).passThrough(),a.whenDELETE(/.*/).passThrough()}]),angular.module("greyscale.mock").factory("greyscaleUoaMock",["$log","$httpBackend","greyscaleUtilsSrv",function(a,b,c){return function(){b.whenGET(/uoas.*mock.*/).respond(function(b,d){var e=c.parseURL(d);a.debug("mocking ",b,d);var f=[],g="public",h=1;"2"===e.params.status&&(g="private",h=11),g+=" ";for(var i=0;i<10;i++)f.push({id:h+i,name:g+(i+h),description:"Mocked UOA "+g+i});return[200,f,{}]})}}]),angular.module("greyscale.mock").factory("greyscaleUserUoaMock",["$httpBackend","$log","_","greyscaleUtilsSrv",function(a,b,c,d){return function(){var e=[{userId:1001,uoaId:1},{userId:1002,uoaId:1},{userId:1003,uoaId:1},{userId:1001,uoaId:15}];a.whenGET(/user-uoa\?.*mock/).respond(function(a,f){b.debug("mocking "+a+":"+f);var g=d.parseURL(f),h=e;if(g.params.userId){var i=g.params.userId.split("|");h=c.filter(e,function(a){return c.includes(i,a.userId+"")})}return[200,h,{}]}),a.whenPOST(/user-uoa\/mock/).respond(function(a,d,f){if(b.debug("mocking "+a+":"+d),f=JSON.parse(f)){for(var g=0;g<f.length;g++)f[g]&&!c.find(e,f[g])&&e.push(f[g]);return[200,"ok",{}]}return[401,"incorrect data",{}]}),a.whenDELETE(/user-uoa\/mock/).respond(function(a,f){b.debug("mocking "+a+":"+f);var g=d.parseURL(f);if(g&&g.params){for(var h in g.params)if(g.params.hasOwnProperty(h)&&g.params[h]){var i=JSON.parse(g.params[h]);i&&c.remove(e,i)}return[200,"ok",{}]}return[401,"incorrect data",{}]})}}]),angular.module("greyscale.mock").factory("greyscaleUserMock",["$log","$httpBackend","greyscaleUtilsSrv",function(a,b,c){return function(){b.whenGET(/users\?.*mock.*/).respond(function(b,d){a.debug("mocking "+d);for(var e=[],f=c.parseURL(d),g=0;g<15;g++)e.push({roleID:2,id:g+1001,email:"user-"+(g+1001)+"@mocked",firstName:"test user "+(g+1001),lastName:"mocked",mobile:null,birthday:(new Date).toISOString(),resetPasswordToken:null,resetPasswordExpires:null,created:(new Date).toISOString(),isActive:!0,organizationId:f.params.organizationId||777});return[200,e,{}]})}}]),angular.module("greyscale.mock").factory("greyscaleTranslationMock",["$httpBackend","greyscaleUtilsSrv","$log","$filter",function(a,b,c,d){var e=[{essenceId:4,entityId:1,field:"title",langId:2,value:"Яблоко"},{essenceId:4,entityId:1,field:"title",langId:1,value:"Apple"},{essenceId:4,entityId:2,field:"title",langId:2,value:"Арбуз"}],f=/\/translations(\/(\d+)(\/(\d+))?)?.*mock.*/;return function(){a.whenGET(f).respond(function(a,c){var g=f.exec(c),h=b.parseURL(c),i=h.params||{},j=e;return i=_.pick(i,["essenceId","entityId","field","langId","value"]),g[2]&&(i.essenceId=g[2],g[4]&&(i.entityId=g[4])),i&&(j=d("filter")(j,i)),[200,j,{}]}),a.whenPOST(f).respond(function(a,b,d){c.debug("mocking "+a+" :"+b);var f=JSON.parse(d),g=[200,"ok",{}],h=_.findIndex(e,_.pick(f,["essenceId","entityId","field","langId"]));return h<0?e.push(_.pick(f,["essenceId","entityId","field","langId","value"])):g=[400,"adding translation exists",{}],c.debug(f,h,e),g}),a.whenPUT(f).respond(function(a,b,d){c.debug("mocking "+a+" :"+b);var f=JSON.parse(d),g=[200,"ok",{}],h=_.findIndex(e,_.pick(f,["essenceId","entityId","field","langId"]));return h>=0?e[h]=_.pick(f,["essenceId","entityId","field","langId","value"]):g=[400,"translation not found",{}],c.debug(f,h,e),g}),a.whenDELETE(f).respond(function(a,b,d){c.debug("mocking "+a+" :"+b);var f=JSON.parse(d),g=[200,"ok",{}],h=_.findIndex(e,_.pick(f,["essenceId","entityId","field","langId"]));return h>=0?e.splice(h,1):g=[400,"translation not found",{}],c.debug(f,h,e),g})}}]);