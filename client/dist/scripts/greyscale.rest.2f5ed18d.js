"use strict";angular.module("greyscale.rest",["restangular","greyscale.core"]).config(["greyscaleEnv","RestangularProvider","greyscaleGlobalsProvider","greyscaleRolesSrvProvider",function(a,b,c,d){var e="public";b.setBaseUrl((a.apiProtocol||"http")+"://"+a.apiHostname+(void 0!==a.apiPort?":"+a.apiPort:"")+"/"+e+"/"+a.apiVersion),b.setDefaultHttpFields({cache:!1,withCredentials:!1});var f=d.$get();f().then(c.initRoles)}]),angular.module("greyscale.rest").factory("greyscaleAccessApi",["greyscaleRestSrv",function(a){function b(){return a().one("access_matrices")}function c(){return a().one("access_permissions")}function d(a){return a.plain()}function e(a){return b().get(a).then(d)}function f(a){return b().one("access_matrices").customPOST(a)}function g(a,c){return b().one(a+"").get(c).then(d)}function h(a){return c().customPOST(a).then(d)}function i(a){return c().one(a+"").remove()}return{matrices:e,addMatrix:f,listPermissions:g,addPermission:h,delPermission:i}}]),angular.module("greyscale.rest").factory("greyscaleCountryApi",["greyscaleRestSrv",function(a){function b(){return a().one("countries")}function c(){return b().get()}function d(a){return b().customPOST(a)}function e(a){return b().one(a.id+"").remove()}var f=function(a){return b().one(a.id+"").customPUT(a)};return{list:c,add:d,update:f,"delete":e}}]),angular.module("greyscale.rest").factory("greyscaleUoaApi",["greyscaleRestSrv",function(a){function b(a){return g().get(a)}function c(a){return g().one(a.id+"").get({langId:a.langId})}function d(a){return g().customPOST(a)}function e(a){return g().one(a+"").remove()}function f(a){return g().one(a.id+"").customPUT(a)}var g=function(){return a().one("uoas")};return{list:b,get:c,add:d,update:f,"delete":e}}]),angular.module("greyscale.rest").factory("greyscaleUoaTypeApi",["greyscaleRestSrv",function(a){function b(){return g().get()}function c(a){return g().one(a.id+"").get({langId:a.langId})}function d(a){return g().customPOST(a)}function e(a){return g().one(a+"").remove()}function f(a){return g().one(a.id+"").customPUT(a)}var g=function(){return a().one("uoatypes")};return{list:b,get:c,add:d,update:f,"delete":e}}]),angular.module("greyscale.rest").factory("greyscaleUoaTagApi",["greyscaleRestSrv",function(a){function b(a){return g().get(a)}function c(a){return g().one(a.id+"").get({langId:a.langId})}function d(a){return g().customPOST(a)}function e(a){return g().one(a+"").remove()}function f(a){return g().one(a.id+"").customPUT(a)}var g=function(){return a().one("uoatags")};return{list:b,get:c,add:d,update:f,"delete":e}}]),angular.module("greyscale.rest").factory("greyscaleUoaTagLinkApi",["greyscaleRestSrv",function(a){function b(a){return e().get(a)}function c(a){return e().customPOST(a)}function d(a){return e().one(a+"").remove()}var e=function(){return a().one("uoataglinks")};return{list:b,add:c,"delete":d}}]),angular.module("greyscale.rest").factory("greyscaleUoaClassTypeApi",["greyscaleRestSrv",function(a){function b(){return g().get()}function c(a){return g().one(a.id+"").get({langId:a.langId})}function d(a){return g().customPOST(a)}function e(a){return g().one(a+"").remove()}function f(a){return g().one(a.id+"").customPUT(a)}var g=function(){return a().one("uoaclasstypes")};return{list:b,get:c,add:d,update:f,"delete":e}}]),angular.module("greyscale.rest").factory("greyscaleLanguageApi",["greyscaleRestSrv",function(a){function b(){return e().get()}function c(a){return e().customPOST(a)}function d(a){return e().one(a.id+"").remove()}var e=function(){return a().one("languages")},f=function(a){return e().one(a.id+"").customPUT(a)};return{list:b,add:c,update:f,"delete":d}}]),angular.module("greyscale.rest").factory("greyscaleEntityTypeApi",["greyscaleRestSrv",function(a){function b(){return a().one("essences")}function c(a){return b().get(a)}function d(a){return c({id:a})}function e(a){return b().customPOST(a)}return{list:c,add:e,get:d}}]),angular.module("greyscale.rest").factory("greyscaleEntityTypeRoleApi",["greyscaleRestSrv",function(a){function b(){return a().one("essence_roles")}function c(a){return b().get(a)}function d(a){return c({id:a})}function e(a){return b().customPOST(a)}function f(a){return b().one(a.id+"").customPUT(a)}function g(a){return b().one(a+"").remove()}return{list:c,add:e,get:d,"delete":g,update:f}}]),angular.module("greyscale.rest").factory("greyscaleRoleApi",["greyscaleRestSrv",function(a){function b(b){return a({},b).one("roles")}function c(a){return b().one(a+"","rights")}function d(a){return a?a.plain():a}function e(a,c){return b(c).get(a).then(d)}return{list:e,listRights:function(a){return c(a).get().then(d)},addRight:function(a,b){return c(a).one(b+"").customPOST()},delRight:function(a,b){return c(a).one(b+"").remove()}}}]),angular.module("greyscale.rest").factory("greyscaleSurveyApi",["greyscaleRestSrv",function(a){function b(a){return a&&a.plain&&"function"==typeof a.plain&&(a=a.plain()),a}function c(){return a().one("surveys")}function d(){return c().get().then(b)}function e(a){return c().one(a+"").get().then(b)}function f(a){return c().customPOST(a).then(b)}function g(a){return c().one(a.id+"").remove().then(b)}function h(a){return c().one(a.id+"").customPUT(a).then(b)}return{list:d,get:e,add:f,update:h,"delete":g}}]),angular.module("greyscale.rest").factory("greyscaleSurveyAnswerApi",["greyscaleRestSrv",function(a){function b(){return a().one("survey_answers")}function c(a){var b=a;return a&&"function"==typeof a.plain&&(b=a.plain()),b}function d(a,d,e){var f=angular.extend({order:"version"},e);return b().one(a+"",d+"").get(f).then(c)}function e(a,d){var e={};return d&&(e.autosave=d),b().customPOST(a,"",e).then(c)}function f(a,d){return b().one(a+"","attach").customPOST(d).then(c)}function g(a,d){return b().one(a+"").customPUT(d).then(c)}return{list:d,save:e,addAttach:f,update:g}}]),angular.module("greyscale.rest").factory("greyscaleQuestionApi",["greyscaleRestSrv",function(a){function b(a){return g().one(a+"/questions")}function c(a){return f().one(a.id+"").remove()}function d(a){return f().one(a.id+"").customPUT(a)}function e(a){return g().one(a.surveyId+"/questions").customPOST(a)}var f=function(){return a().one("questions")},g=function(){return a().one("surveys")};return{get:b,update:d,"delete":c,add:e}}]),angular.module("greyscale.rest").factory("greyscaleUserApi",["$q","greyscaleRestSrv","greyscaleTokenSrv","greyscaleBase64Srv","greyscaleRealmSrv","greyscaleGlobals",function(a,b,c,d,e,f){function g(){return i().one("organization")}function h(a){return b({},a).one("users")}function i(){return h().one("self")}function j(a){return h(a).one("self").get()}function k(a){return i().customPUT(a)}function l(){return g().get()}function m(a){return g().customPUT(a)}function n(a){return h().one("activate",a).get()}function o(a,b){return h().one("activate",a).customPOST(b)}function p(a,b){return h(b).get(a)}function q(a,f){return b({Authorization:"Basic "+d.encode(a+":"+f)}).one("users","token").get().then(function(a){return c(a.token),e.init(a.realm),a})}function r(b){var d=c(),e=a.resolve(!1);return d&&(e=h(b).one("checkToken",d).get().then(function(){return!0})["catch"](function(){return c(null),!1})),e}function s(){return h(e.origin()).one("logout").post()["catch"](function(){return!1})}function t(a){return h(f.adminSchema).one("invite").customPOST(a)}function u(a,b){return h(b).one("invite").customPOST(a)}function v(a){return g().one("invite").customPOST(a)}function w(a,b){return h(b).one(a.id+"").customPUT(a)}function x(a,b){return h(b).one(a+"").remove()}function y(a){return h().one(a+"")}function z(a){return y(a).one("uoa").get()}function A(a,b){return y(a).one("uoa",b+"").customPOST()}function B(a,b){return y(a).one("uoa",b+"").remove()}function C(a){return h().one("forgot").customPOST({email:a})}function D(a){return h().one("check_restore_token",a).get()}function E(a){return h().one("reset-password").customPUT(a)}return{login:q,logout:s,isAuthenticated:r,get:j,list:p,inviteSuperAdmin:t,inviteAdmin:u,inviteUser:v,activate:o,checkActivationToken:n,getOrganization:l,saveOrganization:m,save:k,update:w,"delete":x,listUoa:z,addUoa:A,delUoa:B,remindPasswd:C,resetToken:D,resetPasswd:E}}]),angular.module("greyscale.rest").factory("greyscaleRightApi",["greyscaleRestSrv",function(a){var b=function(){return a().one("rights")},c=function(a){return b().get(a)},d=function(a){return b().customPOST(a)},e=function(a){return b().one(a+"").get()},f=function(a){return b().one(a.id+"").customPUT(a)},g=function(a){return b().one(a+"").remove()};return{list:c,add:d,get:e,update:f,"delete":g}}]),angular.module("greyscale.rest").factory("greyscaleProjectApi",["greyscaleRestSrv",function(a){function b(b){return a({},b).one("projects")}function c(a,c){return b(c).one(a+"").one("products")}function d(a){return b().one(a+"").one("surveys")}function e(a){return b().get(a)}function f(a,c){return b().one(a+"").get(c)}function g(a){return b().customPOST(a)}function h(a){return b().one(a.id+"").customPUT(a)}function i(a){return b().one(a+"").remove()}function j(a,b,d){return c(a,d).get(b)}function k(a,b){return d(a).get(b)}return{list:e,get:f,add:g,update:h,"delete":i,productsList:j,surveysList:k}}]),angular.module("greyscale.rest").factory("greyscaleProductApi",["greyscaleRestSrv","greyscaleUtilsSrv",function(a,b){function c(){return a().one("products")}function d(a,b){return c().one(a+"").get(b)}function e(a){return c().getList("",{query:a})}function f(a){return c().customPOST(a)}function g(a){return c().one(a.id+"").customPUT(a)}function h(a){return c().one(a+"").remove()}function i(a){return c().one(a+"").one("uoa")}function j(a){return c().one(a+"").one("tasks")}function k(a){return c().one(a+"").one("indexes")}function l(a){return c().one(a+"").one("subindexes")}function m(a){return function(){return c().one(a+"").one("aggregate").get()}}function n(a){return function(){return k(a).get()}}function o(a){return function(){return l(a).get()}}function p(a){return function(b){return k(a).customPUT(b)}}function q(a){return function(b){return l(a).customPUT(b)}}function r(a){return function(b){return i(a).get(b)}}function s(a){return function(b){return j(a).get(b).then(function(a){return angular.forEach(a,function(a){a.userUsergroupId=a.userUsergroupId||1}),a})}}function t(a){return function(b){return i(a).customPOST(b)}}function u(a){return function(b){return j(a).customPUT(b)}}function v(a){return function(b){return i(a).one(b+"").remove()}}function w(a){return function(b){return j(a).one(b+"").remove()}}function x(a){return function(b,d){return c().one(a+"").one("move").one(b+"").get(d)}}function y(a){return a.plain()}function z(a){return function(){return c().one(a+"").one("export_ticket").get().then(y)}}function A(a){return b.getApiBase()+"/products/"+a.ticket+"/export.csv"}var B=function(a){return{uoasList:r(a),uoasAddBulk:t(a),uoasDel:v(a),tasksList:s(a),tasksListUpdate:u(a),tasksDel:w(a),taskMove:x(a),aggregate:m(a),indexesList:n(a),indexesListUpdate:p(a),subindexesList:o(a),subindexesListUpdate:q(a),getTicket:z(a)}};return{get:d,getList:e,add:f,update:g,"delete":h,product:B,getDownloadDataLink:A}}]),angular.module("greyscale.rest").factory("greyscaleOrganizationApi",["greyscaleRestSrv",function(a){function b(b){return a({},b).one("organizations")}function c(a){return a?a.plain():a}function d(a,d){return b(d).get(a).then(c)}function e(a,d){return b(d).customPOST(a).then(c)}function f(a,d){return b(d).one(a).get().then(c)}function g(a,d){return b(d).one(a.id+"").customPUT(a).then(c)}function h(a,c){return b(c).one(a+"").remove()}function i(a,d){return b(d).one(a+"","products").get().then(c)}function j(a,d){return b(d).one(a+"","groups").get().then(c)}return{list:d,get:f,add:e,update:g,"delete":h,products:i,groups:j}}]),angular.module("greyscale.rest").service("greyscaleUserUoaApi",["greyscaleRestSrv",function(a){function b(a){return a.plain()}function c(b){return a().one("users",b+"").one("uoa")}function d(a,d){return c(a).get(d).then(b)}function e(a,b){return c(a).customPOST(b)}function f(a,b){return c(a).one(b+"").customPOST({})}function g(a,b){return c(a).customOperation("remove","",null,null,b)}function h(a,b){return c(a).one(b+"").remove({})}return{list:d,add:e,del:g,addOne:f,delOne:h}}]),angular.module("greyscale.rest").factory("greyscaleGroupApi",["$q","greyscaleRestSrv",function(a,b){function c(){return b().one("groups")}function d(a){return b().one("organizations").one(""+a).one("groups")}function e(a,b){return d(a).get(b)}function f(a,b){return d(a).customPOST(b)}function g(a){return c().one(a.id+"").customPUT(a)}function h(a){return c().one(a+"").remove()}return{list:e,add:f,update:g,"delete":h}}]),angular.module("greyscale.rest").factory("greyscaleProductWorkflowApi",["greyscaleRestSrv","$q",function(a,b){function c(){return a().one("workflows")}function d(a,b){return c().one(a+"").get(b).then(j)}function e(a){return c().customPOST(a).then(j)}function f(a){return c().one(a.id+"").customPUT(a).then(j)}function g(a){return c().one(a+"").one("steps")}function h(a){return function(b){return g(a).get(b).then(j).then(function(a){return angular.forEach(a,function(a){a.usergroupId=a.usergroupId||[1,2]}),a})}}function i(a){return function(b){return g(a).customPUT(b).then(j)}}function j(a){return a&&"function"==typeof a.plain?a.plain():a}var k=function(a){return{stepsList:h(a),stepsListUpdate:i(a)}};return{get:d,add:e,update:f,workflow:k}}]),angular.module("greyscale.rest").factory("greyscaleTranslationApi",["greyscaleRestSrv","$q",function(a,b){function c(){return a().one("translations")}function d(a){return c().get(a)}function e(a,b){return c().one(a+"").get(b)}function f(a,b,d){return c().one(a+"",b+"").get(d)}function g(a){var b=c();return a.mock&&b.one("mock"),b.customPOST(a)}function h(a){var d;if(a.essenceId&&a.entityId&&a.langId&&a.field){var e=c().one(a.essenceId+"",a.entityId+"").one(a.field+"",a.langId+"");a.mock&&e.one("mock"),d=e.customPUT(a)}else d=b.reject("inconsistent translation body");return d}function i(a){var d;if(a.essenceId&&a.entityId&&a.langId&&a.field){var e=c().one(a.essenceId+"",a.entityId+"").one(a.field+"",a.langId+"");a.mock&&e.one("mock"),d=e.remove()}else d=b.reject("inconsistent translation body");return d}return{list:d,listByEntityType:e,listByEntity:f,add:g,edit:h,"delete":i}}]),angular.module("greyscale.rest").factory("greyscaleTaskApi",["greyscaleRestSrv","$q",function(a,b){function c(){return a().one("tasks")}function d(){return a().one("users")}function e(){return d().one("self")}function f(){return e().one("tasks")}function g(a){return f().get(a)}function h(a){return c().one(a+"").remove()}function i(a){return c().customPOST(a)}function j(a,b){return c().one(a+"").customPUT(b)}function k(a){return c().one(a+"").get()}return{myList:g,get:k,add:i,update:j,del:h}}]),angular.module("greyscale.rest").factory("greyscaleDiscussionApi",["_","greyscaleRestSrv",function(a,b){function c(){return b().one("discussions")}function d(a){return a&&"function"==typeof a.plain?a.plain():a}function e(a){return a=angular.extend({order:"-created,-updated"},a),c().get(a).then(d)}function f(a){return c().one("entryscope").get(a).then(d)}function g(a){return c().one("entryscope",a+"").get().then(d)}function h(a){return c().customPOST(a).then(d)}function i(a,b){return c().one(a+"").customPUT(b).then(d)}function j(a){return c().one(a+"").remove().then(d)}function k(a){return c().one("users",a+"").get().then(d)}return{list:e,scopeList:f,get:g,add:h,update:i,remove:j,getUsers:k}}]),angular.module("greyscale.rest").factory("greyscaleNotificationApi",["greyscaleRestSrv",function(a){function b(){return a().one("notifications")}function c(a){return b().get(a)}function d(a){return b().one("resenduserinvite").one(""+a).customPUT()}function e(a){return b().customPOST(a)}function f(a){return b().one("markread").one(""+a).customPUT()}function g(){return b().one("markallread").customPUT()}function h(a){return b().one("markunread").one(""+a).customPUT()}return{list:c,resendUserInvite:d,send:e,setRead:f,setAllRead:g,setUnread:h}}]),angular.module("greyscale.rest").factory("greyscaleVisualizationApi",["greyscaleRestSrv","$q",function(a,b){function c(b){return a().one("organizations",b).one("visualizations")}function d(a){return function(b){return c(a).get(b)}}function e(a){return function(b){return c(a).one(b+"").get()}}function f(a){return function(b){return c(a).customPOST(b)}}function g(a){return function(b,d){return c(a).one(b+"").customPUT(d)}}function h(a){return function(b){return c(a).one(b+"").remove()}}return function(a){return{list:d(a),get:e(a),add:f(a),update:g(a),del:h(a)}}}]),angular.module("greyscale.rest").factory("greyscaleComparativeVisualizationApi",["greyscaleRestSrv","$q",function(a,b){function c(b){return a().one("organizations",b).one("comparative_visualizations")}function d(a){return function(b){return c(a).get(b)}}function e(a){return function(b){return c(a).one(b+"").get()}}function f(a){return function(b){return c(a).customPOST(b)}}function g(a){return function(b,d){return c(a).one(b+"").customPUT(d)}}function h(a){return function(b){return c(a).one(b+"").remove()}}function i(a,b){return c(a).one(b+"").one("datasets")}function j(a,b){return function(c){return i(a,b).get(c)}}function k(a,b){return function(c){return i(a,b).one(c+"").get()}}function l(a,b){return function(c){return i(a,b).customPOST(c)}}function m(a,b){return function(c,d){return i(a,b).one(c+"").customPUT(d)}}function n(a,b){return function(c){return i(a,b).one(c+"").remove()}}function o(a){return function(b){return{list:j(a,b),get:k(a,b),add:l(a,b),update:m(a,b),del:n(a,b)}}}return function(a){return{list:d(a),get:e(a),add:f(a),update:g(a),del:h(a),datasets:o(a)}}}]),angular.module("greyscale.rest").factory("greyscaleUploadApi",["greyscaleRestSrv","greyscaleUtilsSrv",function(a,b){function c(b){return a({},b).one("uploads")}function d(a){return c().one("upload_link").customPOST(a).then(h)}function e(a,b){return c(b).one("success").customPOST(a).then(h)}function f(a){return c().one(a+"","ticket").get().then(h)}function g(a){return b.getApiBase()+"/uploads/get/"+a}function h(a){return a&&"function"==typeof a.plain?a.plain():a}function i(a,b,d){return c().one(a+"",b+"").one(d+"").remove().then(h)}return{getUrl:d,success:e,getDownloadUrl:f,getLink:g,remove:i}}]);