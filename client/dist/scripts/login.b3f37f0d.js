!function(){"use strict";window.greyscaleEnv={name:"docker",supportedLocales:["en","ru","es","fr"],apiProtocol:window.location.protocol.substring(0,window.location.protocol.length-1),apiHostname:window.location.host,apiPort:80,apiVersion:"v0.2",adminSchema:"public",tokenTTLsec:300,enableDebugLog:!0}}(),function(){"use strict";function a(){if(greyscaleEnv){var a=d("current_realm")||greyscaleEnv.adminSchema,b=[greyscaleEnv.apiHostname,greyscaleEnv.apiPort].join(":"),c=[a,greyscaleEnv.apiVersion].join("/");return(greyscaleEnv.apiProtocol||"http")+"://"+b+"/"+c}return console.log("config not loaded"),""}function b(b){return a()+j[b]}function c(a,b,c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="expires="+d.toGMTString();document.cookie=a+"="+b+";path=/;"+e}function d(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){var e=c[d].trim();if(0===e.indexOf(b))return e.substring(b.length,e.length)}return""}function e(a){var b,c,d=a.length,e=$("#org");for($$("#org option").forEach(function(a){a.remove()}),c=$.create("option",{text:"",value:null,selected:!0,disabled:"disabled",hidden:"hidden"}),$.inside(c,e),b=0;b<d;b++)c=$.create("option",{text:a[b].orgName,value:a[b].realm}),$.inside(c,e);$("#realm-wrp").classList.remove("hidden")}function f(a){var b=$("#err-wrp"),c=a;a&&a.xhr&&(c=a.xhr.response&&a.xhr.response.message?a.xhr.response.message:a.xhr.statusText),b.innerHTML='<i class="exclamation-circle"> '+c+"</i>",b.classList.remove("hidden")}function g(){var a=$("#org");a&&a.value&&Greyscale.setCookie("current_realm",a.value,1)}function h(a){var b=window.location.href;a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null}function i(b,c,e){e=e||{},c=a()+"/"+c;var f={method:b,responseType:"json",headers:{token:d("token"),"Content-type":"application/json"}};return $.fetch(c,$.extend(f,e)).then(function(a){return a.response})}var j={chkToken:"/users/checkToken",login:"/users/token",remind:"/users/forgot",languages:"/languages"};$.ready().then(function(){return $.include(window.greyscaleEnv,"/m/config.js").then(function(){window.Greyscale=window.Greyscale||{getApiUrl:b,getBaseUrl:a,setCookie:c,getCookie:d,showRealmSelector:e,showErr:f,getUrlParam:h,fetch:i};var j=$("#org");return j&&j._.events({change:g}),!0})})}(),function(){"use strict";function a(){var a={method:"GET",responseType:"json",headers:{"Content-type":"application/json"}},g=Greyscale.getApiUrl("languages"),h=$("#language-selector"),i=$("#lang-menu");return $.fetch(g,a).then(function(a){var c,g,h,j,k,l=Greyscale.getCookie("locale");for(e=a.response,k=e.length,c=0;c<k;c++)f[e[c].code]=c,~greyscaleEnv.supportedLocales.indexOf(e[c].code)&&(j=$.create("span",{"class":"locale",textContent:e[c].code}),h=$.create("a",{text:e[c].nativeName,title:e[c].name,"data-locale":e[c].code}),g=$.create("li",{className:"link"}),$.start(j,h),$.inside(h,g),$.inside(g,i),l===e[c].code&&b(e[c].code),h._.events({click:d}))}),h._.events({click:c}),!0}function b(a){var b=f[a]||0;$(".dropdown-toggle").title=e[b].nativeName+" ("+e[b].name+")",$(".dropdown-toggle .locale").innerHTML=e[b].code}function c(a){a.preventDefault(),$("#language-selector").classList.toggle("open")}function d(a){a.preventDefault();var c=a.target.attributes["data-locale"].value;b(c),Greyscale.setCookie("locale",c),window.location.reload()}var e=[],f={};$.ready().then(function(){return $.include(window.Greyscale,"/m/greyscale.js").then(a)})}(),function(){"use strict";function a(){var a=Greyscale.getCookie("locale")||"en",d=document.createElement("script");d.src="/l10n/"+a+".js",document.head.appendChild(d),d.onreadystatechange=d.onload=c,window.Greyscale=window.Greyscale||{},window.Greyscale.translate=b,window.Greyscale.translateProceed=c}function b(a,b){var c,d,e,f=a,g=a.split("."),h=g.length;if(L10N){for(c=L10N,d=0;d<h&&"undefined"!=typeof c[g[d]];d++)c=c[g[d]];if(d===h){if(b)for(e in b)b.hasOwnProperty(e)&&(c=c.split("{{"+e+"}}").join(b[e]));f=c}}return f}function c(){var a,c,d,e,f=$$("[data-translate]"),g=f.length;for(a=0;a<g;a++)c=f[a],d=c.attributes["data-translate"].value,e=c.attributes["data-translate-values"],e&&(e=JSON.parse(e.value)),c.innerHTML=b(d,e)}$.ready().then(function(){return $.include(window.Greyscale,"/m/config.js").then(a)})}();